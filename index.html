<!DOCTYPE html>
<html>
<head>
  <title>Speed Math - Winter Forest</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: "Bookman Old Style";
      background: #D3DCE6;
      overflow: hidden;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #gameContainer {
      position: relative;
      width: 100%;
      height: 100%;
    }

    #gameCanvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    #gameUI {
      position: relative;
      z-index: 2;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: rgba(255,255,255,0.7);
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }

    h1 {
      font-size: 3em;
      margin-bottom: 20px;
    }

    #question {
      font-size: 2em;
      margin-bottom: 20px;
    }

    input {
      font-size: 2em;
      width: 80px;
      text-align: center;
      margin-bottom: 20px;
    }

    button {
      font-size: 1.5em;
      padding: 10px 20px;
    }

    #result {
      font-size: 1.5em;
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <div id="gameContainer">
    <canvas id="gameCanvas"></canvas>
    <div id="gameUI">
      <h1>Speed Math</h1>
      <div id="question"></div>
      <input id="answer" type="number">
      <button onclick="check()">Submit</button>
      <p id="result"></p>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const container = document.getElementById('gameContainer');

    canvas.width = container.offsetWidth;
    canvas.height = container.offsetHeight;

    // שלג
    let snowflakes = [];
    for (let i = 0; i < 200; i++) {
      snowflakes.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        r: Math.random() * 4 + 2,
        speed: Math.random() * 2 + 1
      });
    }

    // עצים רנדומליים
    let forest = [];
    for (let i = 0; i < 15; i++) {
      forest.push({
        x: Math.random() * canvas.width,
        y: canvas.height - 100 - Math.random() * 50,
        size: Math.random() * 0.8 + 0.6
      });
    }

    function drawSnow() {
      snowflakes.forEach(f => {
        ctx.fillStyle = "white";
        ctx.beginPath();
        ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2);
        ctx.fill();

        f.y += f.speed;
        if (f.y > canvas.height) f.y = 0;
      });
    }

    function drawTree(x, y, size = 1) {
      // גזע
      ctx.fillStyle = "#4B3621";
      ctx.fillRect(x - 20*size, y, 40*size, 80*size);

      // עלים עם שלג
      ctx.fillStyle = "#FFFFFF";
      ctx.beginPath();
      ctx.arc(x, y - 30*size, 60*size, 0, Math.PI * 2);
      ctx.arc(x - 40*size, y, 50*size, 0, Math.PI * 2);
      ctx.arc(x + 40*size, y, 50*size, 0, Math.PI * 2);
      ctx.fill();
    }

    function drawForest() {
      forest.forEach(tree => drawTree(tree.x, tree.y, tree.size));
    }

    function drawMainTree() {
      const x = canvas.width/2;
      const y = canvas.height - 150;
      // גזע
      ctx.fillStyle = "#4B3621";
      ctx.fillRect(x - 20, y, 40, 150);

      // עלים עם שלג
      ctx.fillStyle = "#FFFFFF";
      ctx.beginPath();
      ctx.arc(x, y - 30, 60, 0, Math.PI * 2);
      ctx.arc(x - 40, y, 50, 0, Math.PI * 2);
      ctx.arc(x + 40, y, 50, 0, Math.PI * 2);
      ctx.fill();

      return {x, y};
    }

    function drawSwing(mainTreePos) {
      const x = mainTreePos.x;
      const y = mainTreePos.y;

      ctx.strokeStyle = "#A0522D";
      ctx.lineWidth = 4;
      ctx.beginPath();
      ctx.moveTo(x - 30, y - 20);
      ctx.lineTo(x - 30, y - 60);
      ctx.moveTo(x + 30, y - 20);
      ctx.lineTo(x + 30, y - 60);
      ctx.stroke();

      ctx.fillStyle = "#8B4513";
      ctx.fillRect(x - 35, y - 60, 70, 10);
    }

    function drawSnowman() {
      const x = canvas.width*0.8;
      const y = canvas.height - 60;

      ctx.fillStyle = "#FFFFFF";
      ctx.beginPath();
      ctx.arc(x, y, 25, 0, Math.PI * 2);
      ctx.fill();
      ctx.beginPath();
      ctx.arc(x, y - 35, 20, 0, Math.PI * 2);
      ctx.fill();

      // פנים
      ctx.fillStyle = "#000000";
      ctx.beginPath();
      ctx.arc(x - 5, y - 38, 2, 0, Math.PI * 2);
      ctx.arc(x + 5, y - 38, 2, 0, Math.PI * 2);
      ctx.fill();

      // אף
      ctx.fillStyle = "#FFA500";
      ctx.beginPath();
      ctx.moveTo(x, y - 35);
      ctx.lineTo(x + 10, y - 33);
      ctx.lineTo(x, y - 31);
      ctx.fill();

      // כובע
      ctx.fillStyle = "#000000";
      ctx.fillRect(x - 12, y - 55, 24, 10);
      ctx.fillRect(x - 8, y - 65, 16, 10);

      // צעיף
      ctx.fillStyle = "#FF0000";
      ctx.fillRect(x - 15, y - 27, 30, 5);

      // זרועות
      ctx.strokeStyle = "#4B3621";
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(x - 20, y - 40);
      ctx.lineTo(x - 40, y - 50);
      ctx.moveTo(x + 20, y - 40);
      ctx.lineTo(x + 40, y - 50);
      ctx.stroke();
    }

    function drawScene() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // רקע שמיים
      ctx.fillStyle = "#D3DCE6";
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // שלג קרקע
      ctx.fillStyle = "#FFFFFF";
      ctx.fillRect(0, canvas.height - 50, canvas.width, 50);

      drawForest();
      const mainTreePos = drawMainTree();
      drawSwing(mainTreePos);
      drawSnowman();
      drawSnow();
    }

    function animate() {
      drawScene();
      requestAnimationFrame(animate);
    }

    animate();

    // ==========================
    // משחק מתמטי
    // ==========================
    let a, b;

    function newQ() {
      a = Math.floor(Math.random() * 20) + 1;
      b = Math.floor(Math.random() * 20) + 1;
      document.getElementById("question").innerText = a + " + " + b + " = ?";
    }

    function check() {
      const user = Number(document.getElementById("answer").value);
      if (user === a + b) {
        document.getElementById("result").innerText = "Correct!";
      } else {
        document.getElementById("result").innerText = "Try again!";
      }
      document.getElementById("answer").value = "";
      newQ();
    }

    newQ();
  </script>
</body>
</html>
